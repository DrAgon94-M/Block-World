# 接口需求

* **PlayerController**  角色控制器，提供操作角色的所有接口
  * **Move(dir : number)**  移动角色，控制角色的横向移动
  * **Jump()** 使角色跳跃，控制角色的纵向移动
  * **JumpHeld()** 使角色在跳跃后，按紧按扭键还可以继续跳跃
  * **Dash(dir : Vec2)**  使角色冲刺
* **CameraManager** 摄像机控制器，提供摄像机的操作
  * **FollowTo(node : Node)**  镜头跟随
  * **Shake(force : number, duration : number)**  镜头抖动
  * **MoveTo(pos : Vec2)**  镜头移动到某个点
* **LevelManager**  关卡管理器，负责关卡的一切
  * **ChangeLevel(levelId : number)**  切换到指定关卡，摄像机移动到指定位置等
  * **LevelInit(levelId : number)**  当前关卡初始化，刷新物体等

* **InputManager**  提供角色多种操作模式

# 具体实现

## 角色系统

### 需要的类和接口

* **PlayerController**  外观类，整合接口
  * **Move(dir : number) ** 
  * **Jump()**  
  * **JumpHeld()**
  * **Dash(dir : Vec2)**
* **PlayerMotor**  角色马达，负责角色物理运动
  * **Move(dir : number) ** 角色的物理水平移动
  * **Jump()**  角色的物理竖直移动
  * **JumpHeld()**
  * **Dash(dir : Vec2)**
* **PlayerPhysicStatus**  角色物理状态，提供角色的物理状态，是否在地面上等
  * **OnGround : boolean**  表示角色是否在地面上
  * **HeadLock : boolean**  表示角色是否头顶着东西
* **PlayerAttr**  角色的属性，所有角色系统的类都依赖它
  * **moveSpeed : number ** 提供角色的移动速度
  * **jumpForce : number**  提供角色的跳跃力
  * **jumpHeldForce : number ** 提供角色持续跳跃时的力
  * **dashSpeed : number**
  * **dashDuration : number**
  * **dashEffectInterval : number**  角色冲刺过程中留下残影的间隔时间

* **PlayerAnimtion**  负责角色的动画
  * **PlayMoveAnim(dir : number)**  使角色朝指定方向倾斜
  * **PlayJumpAnim()**  播放一个跳跃的动画，使角色的身体有些许缩放
  * **PlayerDashAnim(duration : number)**  使角色在冲刺期间留下残影

